-- 1.1

ALTER USER IK9208 IDENTIFIED BY "ik9208";


-- 1.2

SELECT *
FROM USER_ROLE_PRIVS;

SELECT *
FROM ROLE_SYS_PRIVS;

SELECT *
FROM ROLE_TAB_PRIVS;

SELECT *
FROM USER_SYS_PRIVS;

SELECT *
FROM USER_TAB_PRIVS_RECD;

SELECT *
FROM USER_TAB_PRIVS;


-- 1.3

CREATE USER NEW_IK9208 IDENTIFIED BY NEW_IK9208
    DEFAULT TABLESPACE USERS
    TEMPORARY TABLESPACE TEMP
    QUOTA 10 M ON USERS;

SELECT *
FROM ALL_USERS
WHERE USERNAME = 'NEW_IK9208';

SELECT *
FROM USER_USERS;


-- 1.4

CREATE ROLE ROLE_IK9208;

GRANT CREATE SESSION, CREATE SYNONYM,
    CREATE TABLE TO ROLE_IK9208;


-- 1.5

GRANT ROLE_IK9208 TO NEW_IK9208;


-- 1.6

SELECT *
FROM USER_ROLE_PRIVS;
SELECT *
FROM ROLE_SYS_PRIVS;
SELECT *
FROM ROLE_TAB_PRIVS;
SELECT *
FROM USER_SYS_PRIVS;
SELECT *
FROM USER_TAB_PRIVS_RECD;
SELECT *
FROM USER_TAB_PRIVS;


-- 2.1

SELECT *
FROM USER_USERS;


-- 2.2

GRANT SELECT ON REGION TO NEW_IK9208;
GRANT SELECT ON DEPARTMENT TO NEW_IK9208;
GRANT SELECT ON EMPLOYEE TO NEW_IK9208;


-- 2.3

CREATE TABLE REGION AS SELECT *
                       FROM IK9208.REGION;
CREATE TABLE DEPARTMENT AS SELECT *
                           FROM IK9208.DEPARTMENT;
CREATE TABLE EMPLOYEE AS SELECT *
                         FROM IK9208.EMPLOYEE;


SELECT *
FROM REGION;
SELECT *
FROM IK9208.REGION;

SELECT *
FROM DEPARTMENT;
SELECT *
FROM IK9208.DEPARTMENT;

SELECT *
FROM EMPLOYEE;
SELECT *
FROM IK9208.EMPLOYEE;


-- 2.4

GRANT ALL ON REGION TO IK9208;
GRANT ALL ON DEPARTMENT TO IK9208;
GRANT ALL ON EMPLOYEE TO IK9208;


-- 2.5
-- session ikxxyy

SELECT *
FROM USER_TAB_PRIVS_MADE;

SELECT *
FROM USER_TAB_PRIVS_RECD;

-- 3.1

INSERT INTO REGION (ID, NAME)
VALUES (99, 'Харків');
INSERT INTO IK9208.REGION (ID, NAME)
VALUES (99, 'Харків');


-- 3.2

INSERT INTO NEW_IK9208.DEPARTMENT (ID, NAME)
VALUES (99, 'Тестування');
INSERT INTO NEW_IK9208.EMPLOYEE (ID, LAST_NAME, USER_ID, DEPT_ID)
VALUES (1, 'Колобок', '1', 99);

SELECT *
FROM NEW_IK9208.DEPARTMENT
WHERE ID = 99;
SELECT *
FROM NEW_IK9208.EMPLOYEE
WHERE ID = 1;

SELECT *
FROM REGION
WHERE ID = 99;
SELECT *
FROM IK9208.REGION
WHERE ID = 99;


-- 3.3

COMMIT;
SELECT *
FROM NEW_IK9208.DEPARTMENT
WHERE ID = 99;
SELECT *
FROM NEW_IK9208.EMPLOYEE
WHERE ID = 1;


-- 3.4

CREATE SYNONYM S_REGION FOR NEW_IK9208.REGION;

CREATE VIEW V_REGION AS
SELECT *
FROM NEW_IK9208.REGION
WHERE NAME LIKE 'К%';

CREATE VIEW V_REGION_NAME (REGION_NAME) AS
SELECT NAME
FROM NEW_IK9208.REGION;


SELECT *
FROM S_REGION;
SELECT *
FROM V_REGION;
SELECT *
FROM V_REGION_NAME;


-- 3.5

DROP SYNONYM S_REGION;

SELECT *
FROM S_REGION;

-- 3.6


REVOKE SELECT ON REGION FROM IK9208;

SELECT *
FROM V_REGION;
SELECT *
FROM V_REGION_NAME;


-- 3.7

DELETE
FROM NEW_IK9208.REGION;
DELETE
FROM NEW_IK9208.DEPARTMENT;
DELETE
FROM NEW_IK9208.EMPLOYEE;

SELECT *
FROM NEW_IK9208.REGION;
SELECT *
FROM NEW_IK9208.DEPARTMENT;
SELECT *
FROM NEW_IK9208.EMPLOYEE;


DROP USER NEW_IK9208;
DROP USER NEW_IK9208 CASCADE;





